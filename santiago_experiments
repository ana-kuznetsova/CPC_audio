python -u cpc/train.py \
--pathDB /pio/data/zerospeech2021/LibriSpeech-wav/train-clean-100 \
--pathTrain /pio/scratch/2/jch/wav2vec/LibriSpeech100_labels_split/train_split.txt \
--pathVal /pio/scratch/2/jch/wav2vec/LibriSpeech100_labels_split/test_split.txt \
--file_extension .wav \
--normMode layerNorm \
--dropout \
--rnnMode transformer \
--n_process_loader 1 \
--max_size_loaded 4000000000 \
--batchSizeGPU 32 \
--nPredicts 6 \
--CPCCTC \
--CPCCTCNumMatched 12 \
--limitNegsInBatch 8 \
--nEpoch 50 \
--nGPU 2 \
--nLevelsGRU 2 \
--schedulerRamp 10 \

bash lineval_ls100.sh /pio/scratch/2/i323106/wav2vec/runs/cpc/acpc-hierarchical-uniformpooling4_2/checkpoint_49.pt
bash lineval_ls100.sh /pio/scratch/2/i323106/wav2vec/runs/cpc/acpc-hierarchical-uniformpooling4_2/checkpoint_49.pt --get_encoded

python cpc/eval/ABX.py from_checkpoint /pio/scratch/2/i323106/wav2vec/runs/cpc/acpc-hierarchical-uniformpooling4_2/checkpoint_49.pt /pio/data/zerospeech2021/dataset/phonetic/dev-clean/dev-clean.item /pio/data/zerospeech2021/LibriSpeech-wav/dev-clean/ --seq_norm --strict --file_extension .wav --out /pio/scratch/2/i323106/wav2vec/runs/cpc/acpc-hierarchical-uniformpooling4_2/abx_exp/

bash train_ls100.sh --pathCheckpoint /pio/scratch/2/i323106/wav2vec/runs/cpc/acpc-hierarchical-uniformpooling8_2 --CPCCTCReductionFactor 8

python /pio/scratch/2/i323106/CPC_audio/cpc/criterion/clustering/clustering_script.py \
    --pathDB /pio/data/zerospeech2021/LibriSpeech-wav/train-clean-100/ --recursionLevel 1 \
    --nClusters 50 --MAX_ITER 150 --level_gru 2 \
    --save --load --batchSizeGPU 300 \
    /pio/scratch/2/i323106/wav2vec/runs/cpc/acpc-hierarchical-uniformpooling4_2/checkpoint_49.pt \
    /pio/scratch/2/i323106/wav2vec/runs/cpc/acpc-hierarchical-uniformpooling4_2/kmeans/unipool4_2_kmeans50.pt

bash train_ls100.sh --pathCheckpoint /pio/scratch/2/i323106/wav2vec/runs/cpc/acpc-hierarchical-uniformpooling16 --CPCCTCReductionFactor 16
bash train_ls100.sh --pathCheckpoint /pio/scratch/2/i323106/wav2vec/runs/cpc/acpc-hierarchical-uniformpooling32 --CPCCTCReductionFactor 32

bash lineval_ls100.sh /pio/scratch/2/i323106/wav2vec/runs/cpc/acpc-hierarchical-uniformpooling8_2/checkpoint_49.pt
bash lineval_ls100.sh /pio/scratch/2/i323106/wav2vec/runs/cpc/acpc-hierarchical-uniformpooling8_2/checkpoint_49.pt --get_encoded
bash lineval_ls100.sh /pio/scratch/2/i323106/wav2vec/runs/cpc/acpc-hierarchical-uniformpooling16/checkpoint_49.pt
bash lineval_ls100.sh /pio/scratch/2/i323106/wav2vec/runs/cpc/acpc-hierarchical-uniformpooling16/checkpoint_49.pt --get_encoded
bash lineval_ls100.sh /pio/scratch/2/i323106/wav2vec/runs/cpc/acpc-hierarchical-uniformpooling32/checkpoint_49.pt
bash lineval_ls100.sh /pio/scratch/2/i323106/wav2vec/runs/cpc/acpc-hierarchical-uniformpooling32/checkpoint_49.pt --get_encoded

python cpc/eval/ABX.py from_checkpoint /pio/scratch/2/i323106/wav2vec/runs/cpc/acpc-hierarchical-uniformpooling8_2/checkpoint_49.pt /pio/data/zerospeech2021/dataset/phonetic/dev-clean/dev-clean.item /pio/data/zerospeech2021/LibriSpeech-wav/dev-clean/ --seq_norm --strict --file_extension .wav --out /pio/scratch/2/i323106/wav2vec/runs/cpc/acpc-hierarchical-uniformpooling8_2/abx_exp/
python cpc/eval/ABX.py from_checkpoint /pio/scratch/2/i323106/wav2vec/runs/cpc/acpc-hierarchical-uniformpooling16/checkpoint_49.pt /pio/data/zerospeech2021/dataset/phonetic/dev-clean/dev-clean.item /pio/data/zerospeech2021/LibriSpeech-wav/dev-clean/ --seq_norm --strict --file_extension .wav --out /pio/scratch/2/i323106/wav2vec/runs/cpc/acpc-hierarchical-uniformpooling16/abx_exp/
python cpc/eval/ABX.py from_checkpoint /pio/scratch/2/i323106/wav2vec/runs/cpc/acpc-hierarchical-uniformpooling32/checkpoint_49.pt /pio/data/zerospeech2021/dataset/phonetic/dev-clean/dev-clean.item /pio/data/zerospeech2021/LibriSpeech-wav/dev-clean/ --seq_norm --strict --file_extension .wav --out /pio/scratch/2/i323106/wav2vec/runs/cpc/acpc-hierarchical-uniformpooling32/abx_exp/

python /pio/scratch/2/i323106/CPC_audio/cpc/criterion/clustering/clustering_script.py \
    --pathDB /pio/data/zerospeech2021/LibriSpeech-wav/train-clean-100/ --recursionLevel 1 \
    --nClusters 50 --MAX_ITER 150 --level_gru 2 \
    --save --load --batchSizeGPU 300 \
    /pio/scratch/2/i323106/wav2vec/runs/cpc/acpc-hierarchical-uniformpooling8_2/checkpoint_49.pt \
    /pio/scratch/2/i323106/wav2vec/runs/cpc/acpc-hierarchical-uniformpooling8_2/kmeans/unipool4_2_kmeans50.pt

python /pio/scratch/2/i323106/CPC_audio/cpc/criterion/clustering/clustering_script.py \
    --pathDB /pio/data/zerospeech2021/LibriSpeech-wav/train-clean-100/ --recursionLevel 1 \
    --nClusters 50 --MAX_ITER 150 --level_gru 2 \
    --save --load --batchSizeGPU 300 \
    /pio/scratch/2/i323106/wav2vec/runs/cpc/acpc-hierarchical-uniformpooling16/checkpoint_49.pt \
    /pio/scratch/2/i323106/wav2vec/runs/cpc/acpc-hierarchical-uniformpooling16/kmeans/unipool4_2_kmeans50.pt

python /pio/scratch/2/i323106/CPC_audio/cpc/criterion/clustering/clustering_script.py \
    --pathDB /pio/data/zerospeech2021/LibriSpeech-wav/train-clean-100/ --recursionLevel 1 \
    --nClusters 50 --MAX_ITER 150 --level_gru 2 \
    --save --load --batchSizeGPU 300 \
    /pio/scratch/2/i323106/wav2vec/runs/cpc/acpc-hierarchical-uniformpooling32/checkpoint_49.pt \
    /pio/scratch/2/i323106/wav2vec/runs/cpc/acpc-hierarchical-uniformpooling32/kmeans/unipool4_2_kmeans50.pt

python /pio/scratch/2/i323106/CPC_audio/scripts/quantize_audio.py \
    /pio/scratch/2/i323106/wav2vec/runs/cpc/acpc-hierarchical-uniformpooling4_2/kmeans/unipool4_2_kmeans50.pt \
    /pio/data/zerospeech2021/LibriSpeech-wav/dev-clean/ \
    /pio/scratch/2/i323106/wav2vec/runs/cpc/acpc-hierarchical-uniformpooling4_2/quantized/LibriSpeech-wav/dev-clean/ \
    --file_extension wav

python /pio/scratch/2/i323106/CPC_audio/scripts/quantize_audio.py \
    /pio/scratch/2/i323106/wav2vec/runs/cpc/acpc-hierarchical-uniformpooling4_2/kmeans/unipool4_2_kmeans50.pt \
    /pio/data/zerospeech2021/dataset/lexical/dev/ \
    /pio/scratch/2/i323106/wav2vec/runs/cpc/acpc-hierarchical-uniformpooling4_2/quantized/lexical/dev/ \
    --file_extension wav


python /pio/scratch/2/i323106/CPC_audio/scripts/quantize_audio.py \
    /pio/scratch/2/i323106/wav2vec/runs/cpc/acpc-hierarchical-uniformpooling4_2/kmeans/unipool4_2_kmeans50.pt \
    /pio/data/zerospeech2021/dataset/lexical/test/ \
    /pio/scratch/2/i323106/wav2vec/runs/cpc/acpc-hierarchical-uniformpooling4_2/quantized/lexical/test/ \
    --file_extension wav

bash train_ls100.sh --pathCheckpoint /pio/scratch/2/i323106/wav2vec/runs/cpc/acpc-hierarchical-uniformpooling4_lessWeightSecond/ --CPCCTCReductionFactor 4 --headWeights 1.0 0.1
bash train_ls100.sh --pathCheckpoint /pio/scratch/2/i323106/wav2vec/runs/cpc/acpc-hierarchical-uniformpooling4_e-1reg --CPCCTCReductionFactor 4 --headWeights 0.1 1.0

bash train_ls100.sh --pathCheckpoint /pio/scratch/2/i323106/wav2vec/runs/cpc/acpc-hierarchical-smartpooling4 --CPCCTCReductionFactor 4 --smartPooling

bash train_ls100.sh --pathCheckpoint /pio/scratch/2/i323106/wav2vec/runs/cpc/acpc-hierarchical-uniformpooling4_e-2down --CPCCTCReductionFactor 4 --headWeights 1.0 0.01